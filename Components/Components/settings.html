<div class="card">
  <h2>Settings</h2>
  <p class="sub">Set crop, thresholds and location</p>
  <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:8px">
    <input id="set-crop" placeholder="Crop (tomato)" />
    <input id="set-location" placeholder="Location (city)" />
    <button class="btn" id="save-settings">Save</button>
  </div>
</div>

<script>
function init_settings(){
  document.getElementById('save-settings').addEventListener('click', ()=>{
    const crop = document.getElementById('set-crop').value || 'tomato';
    const loc = document.getElementById('set-location').value || 'Unknown';
    db.ref('/smartFarm/settings').update({ cropType: crop, location: loc });
    alert('Settings saved');
    document.getElementById('ui-location').textContent = loc;
  });

  // preload existing settings if present
  db.ref('/smartFarm/settings').once('value').then(snap=>{
    const v = snap.val() || {};
    if(v.cropType) document.getElementById('set-crop').value = v.cropType;
    if(v.location){ document.getElementById('set-location').value = v.location; document.getElementById('ui-location').textContent = v.location; }
  });
}
</script>
